<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="view_product_margin_std_price_graph" model="ir.ui.view">
            <field name="name">product.margin.std.price.graph</field>
            <field name="model">product.product</field>
            <field name="priority" eval="50"/>
            <field name="arch" type="xml">
                <graph string="Sales Margins" type="bar">
                    <field name="name"/>
                    <field name="turnover" operator="+"/>
                    <field name="total_cost" operator="+"/>
                </graph>
            </field>
        </record>

        <record id="view_product_margin_std_price_form" model="ir.ui.view">
            <field name="name">product.margin.std.price.form</field>
            <field name="model">product.product</field>
            <field name="priority">50</field>
            <field name="arch" type="xml">
                 <form string="Sales Margins" version="7.0">
                    <group col="4">
                        <field name="name"/>
                        <field name="default_code"/>
                    </group>
                    <notebook>
                    <page string="Margins">
                        <group string="Analysis Criteria">
                            <field name="date_from"/>
                            <field name="date_to"/>
                            <newline/>
                            <field name="invoice_state" />

                            <separator string="Sales" colspan="4"/>
                            <field name="list_price"
                                   string="List Price"
                                   readonly="1"/>
                            <field name="sale_avg_price"
                                    string="Avg. Invoiced Price"/>
                            <field name="sale_num_invoiced" />
                            <field name="sale_expected" />
                            <field name="sales_gap" />

                            <separator string="Cost" colspan="4"/>
                            <field name="standard_price"
                                   string="Manuf. Cost"
                                   readonly="1"/>

                            <separator string="Margins" colspan="4"/>
                            <field name="th_gross_margin"/>
                            <field name="gross_margin"/>
                            <field name="th_gross_margin_rate"
                                   widget="progressbar"/>
                            <field name="gross_margin_rate"
                                   widget="progressbar"/>

                            <separator string="Totals" colspan="4"/>
                            <field name="turnover"/>
                            <field name="total_margin_on_cost"/>
                         </group>
                    </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record id="view_product_margin_std_price_tree" model="ir.ui.view">
            <field name="name">product.margin.std.price.tree</field>
            <field name="model">product.product</field>
            <field name="priority" eval="50"/>
            <field name="arch" type="xml">
                <tree string="Sales Margins">
                    <field name="name"/>
                    <field name="default_code" invisible="1"/>
                    <field name="list_price" string="List Price"/>
                    <field name="sale_avg_price" string="Avg. Invoiced Price"/>
                    <field name="sale_num_invoiced" string="# Invoiced"/>
                    <field name="standard_price" string="Manuf. Cost"/>
                    <field name="th_gross_margin" sum="th_gross_margin"/>
                    <field name="gross_margin" sum="gross_margin"/>
                    <field name="th_gross_margin_rate"/>
                    <field name="gross_margin_rate"/>
                    <field name="total_margin_on_cost"
                           sum="total_margin_on_cost"/>
                    <field name="categ_id" invisible="1"/>
                    <field name="uom_id" invisible="1"/>
                    <field name="type" invisible="1"/>
                    <field name="company_id" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="product_margin_search_form_view" model="ir.ui.view">
            <field name="name">product.margin.search.form</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_search_form_view"/>
            <field name="arch" type="xml">
                <filter name="filter_to_sell" position="after">
                   <separator/>
                   <filter string="Invoiced"
                           name="filter_invoiced"
                           domain="[('sale_num_invoiced','!=',0)]"/>
                </filter>
            </field>
        </record>

        <menuitem
            id="menu_action_product_margin_std_price"
            name="Sales Margins (cost price)"
            parent="base.next_id_64"
            icon="STOCK_JUSTIFY_FILL"
            action="product_margin_std_price_act_window"
            sequence="50" />

    </data>
</openerp>
